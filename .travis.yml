dist: trusty
language: go
go:
  - 1.8.3
  
install: go get -v github.com/spf13/hugo

script:
  - hugo

deploy:
  providers: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  on:
    branch: master
  local_dir: public
  repo: weihanchen/weihanchen.github.io
  target_branch: master
  email: $GITHUB_MAIL

branches:
  only:
    - hugo
notification:
  email:
    - ${GITHUB_MAIL}
  on_success: always

env:
  global:
    - BUILD_FOLDER: public
    - GITHUB_REPO: "@github.com/weihanchen/weihanchen.github.io.git"
    - TARGET_BRANCH: "master"
    - FULL_REPO: "https://${GITHUB_TOKEN}${GITHUB_REPO}"